<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      .teste{
        width: 5px;
        height: 5px;
        display: block;
        float: left;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="../dist/tembo.min.js"></script>
    <div id="content">
    </div>
    <script type="text/javascript">


      var myElement = Tembo.createClass({
        getInitialState : function(){
          setInterval(function(){
            this.setState({
              red:(Math.round(Math.random()*255)).toString(),
              green:(Math.round(Math.random()*255)).toString(),
              blue:(Math.round(Math.random()*255)).toString()
            })
          }.bind(this),10)
          return {
            red : 255,
            green : 0,
            blue : 0
          }
        },

        render : function(){
          return Tembo.createElement('div',{class:'teste',style:"background-color:rgb("+this.state.red+","+this.state.green+","+this.state.blue+");"},'')
        }
      })

      var myCollection = Tembo.createClass({
      getInitialState : function(){
        return {
            limit : 500
        }
      },
      add : function(){
        limit = ++this.state.limit
        this.setState({limit:limit})
      },
      remove : function(){
        limit = --this.state.limit
        this.setState({limit:limit})
      },
      render : function(){
        this.els = [];
        x = 0;
        while(x<this.state.limit){
          this.els.push(Tembo.createElement(myElement,{key : x}))
          x++
        }
        return Tembo.createElement('div',{},this.els)
      }
    })

      Tembo.render(Tembo.createElement(myCollection,{},false), document.getElementById('content'));


    </script>
  </body>
</html>
